# Устранение неполадок

Руководство по решению частых проблем при работе со Steam Avatar Auto-Changer.

## Ошибка: "Expecting value: line 1 column 1 (char 0)"

### Описание проблемы
Эта ошибка возникает, когда Steam API возвращает пустой или некорректный ответ вместо ожидаемого JSON.

### Причины
1. **Steam Guard не настроен** - аккаунт требует двухфакторную аутентификацию
2. **Steam API временно недоступен** - технические работы или высокая нагрузка
3. **Проблемы с сетью** - нестабильное интернет-соединение
4. **Блокировка аккаунта** - Steam заблокировал вход из-за подозрительной активности
5. **Rate limiting** - слишком много запросов в короткий период

### Решения

#### 1. Добавьте Shared Secret для Steam Guard

Если у вас включен Steam Guard Mobile Authenticator, необходимо добавить `shared_secret`:

```
username:password:SHARED_SECRET_HERE
```

Как получить shared secret:
1. Используйте [Steam Desktop Authenticator](https://github.com/Jessecar96/SteamDesktopAuthenticator)
2. Экспортируйте данные аутентификатора
3. Найдите поле `shared_secret`
4. Добавьте его в файл `accounts/accounts.txt`

#### 2. Увеличьте задержку между аккаунтами

Отредактируйте `config.ini`:

```ini
[Settings]
delay_between_accounts = 120  # 2 минуты вместо 1
```

Или запустите с параметром:

```bash
python main.py --delay 120
```

#### 3. Проверьте подключение к интернету

```bash
# Проверка доступности Steam
ping steamcommunity.com

# Проверка через curl
curl -I https://steamcommunity.com
```

#### 4. Подождите и попробуйте позже

Если Steam API недоступен:
- Подождите 15-30 минут
- Проверьте статус Steam: https://steamstat.us/
- Попробуйте снова

#### 5. Уменьшите количество одновременных операций

Обрабатывайте аккаунты партиями:
- Вместо 40 аккаунтов сразу, обработайте 10-15
- Сделайте перерыв между партиями (30-60 минут)

## Ошибка: "Invalid credentials"

### Причины
- Неверный логин или пароль
- Аккаунт заблокирован Steam
- Требуется код Steam Guard

### Решения

1. **Проверьте учетные данные:**
   ```
   # Формат в accounts/accounts.txt
   correct_username:correct_password
   ```

2. **Проверьте аккаунт в браузере:**
   - Попробуйте войти на https://steamcommunity.com
   - Если нужен код - добавьте shared_secret

3. **Убедитесь в отсутствии специальных символов:**
   - Используйте только ASCII символы в пароле
   - Если пароль содержит `:`, экранируйте его

## Ошибка: "Не удалось изменить аватарку"

### Причины
- Файл аватарки поврежден
- Неподдерживаемый формат
- Слишком большой размер файла
- Проблемы с сессией Steam

### Решения

1. **Проверьте формат файла:**
   - Поддерживаются: JPG, PNG, GIF, BMP
   - Рекомендуемый размер: 184x184 пикселей

2. **Проверьте размер файла:**
   ```bash
   # Проверка размера
   ls -lh avatars/

   # Файлы не должны быть больше 5 МБ
   ```

3. **Пересоздайте аватарку:**
   - Откройте в графическом редакторе
   - Измените размер до 184x184
   - Сохраните в формате JPG с качеством 90%

## Сетевые проблемы

### Проблема: Timeout ошибки

**Решение:**
1. Проверьте firewall/антивирус
2. Попробуйте другую сеть
3. Используйте VPN (если Steam доступен через VPN)

### Проблема: Слишком медленная работа

**Решение:**
1. Увеличьте задержку: `python main.py -d 180`
2. Обрабатывайте меньше аккаунтов за раз
3. Проверьте скорость интернета

## Проблемы с библиотекой steampy

### Обновление библиотеки

```bash
pip install --upgrade steampy
```

### Альтернативное решение

Если steampy не работает:
1. Попробуйте установить конкретную версию:
   ```bash
   pip install steampy==1.0.0
   ```

2. Или используйте альтернативную библиотеку:
   ```bash
   pip install steam
   ```

## Логи и отладка

### Включение детального логирования

Отредактируйте `config.ini`:

```ini
[Settings]
log_level = DEBUG
```

Теперь в `logs/app.log` будет больше информации.

### Просмотр логов

```bash
# Последние 50 строк
tail -n 50 logs/app.log

# В реальном времени
tail -f logs/app.log

# Поиск ошибок
grep ERROR logs/app.log
```

## Рекомендации по безопасности

### Избегайте блокировки Steam

1. **Не используйте слишком короткую задержку:**
   - Минимум: 30 секунд
   - Рекомендуется: 60-120 секунд

2. **Обрабатывайте аккаунты партиями:**
   - 10-15 аккаунтов за раз
   - Перерыв 30-60 минут между партиями

3. **Используйте разные IP адреса:**
   - Если у вас много аккаунтов (50+)
   - Рассмотрите использование прокси

4. **Не запускайте программу слишком часто:**
   - Один раз в день максимум
   - Лучше реже, но безопаснее

## Часто задаваемые вопросы

### Q: Можно ли обойти Steam Guard?
**A:** Нет. Необходимо добавить shared_secret в файл аккаунтов.

### Q: Почему так долго обрабатываются аккаунты?
**A:** Задержка нужна для безопасности. Steam может заблокировать подозрительную активность.

### Q: Сколько аккаунтов можно обработать за раз?
**A:** Рекомендуется до 20-30 аккаунтов с задержкой 60+ секунд.

### Q: Программа не работает, что делать?
**A:**
1. Проверьте логи: `logs/app.log`
2. Убедитесь в правильности credentials
3. Добавьте shared_secret
4. Увеличьте задержку
5. Попробуйте позже

## Получение помощи

Если проблема не решена:

1. **Проверьте Issues на GitHub:**
   - Возможно, кто-то уже решил эту проблему

2. **Создайте новый Issue:**
   - Опишите проблему
   - Приложите логи (без паролей!)
   - Укажите версию Python и ОС

3. **Предоставьте информацию:**
   ```bash
   python --version
   pip list | grep steampy
   ```

---

**Важно:** Всегда проверяйте логи в `logs/app.log` - там содержится детальная информация об ошибках.
